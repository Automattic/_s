!function(t){t.widget("silverbackstudio.ajaxArchive",{options:{nextPageElement:".posts-navigation .nav-previous a",loadMoreButton:".load-more",paginationLinks:".pagination a",filterElement:".ajax-filter",postContainer:".ajax-content",itemSelector:".ajax-content .hentry",loadingClass:"loading",noMoreClass:"no-more"},_create:function(){this.element.addClass("ajax-archive"),this._update()},_setOption:function(t,e){this.options[t]=e,this._update()},_update:function(){var e=this;this.options.loadMoreButton&&t(this.element).on("click.ajaxArchive",this.options.loadMoreButton,function(n){var i=t(e.options.nextPageElement,e.element).attr("href");i&&(e._navigate({url:i,append:!0},this._preventDefault),n.preventDefault())}),this.options.paginationLinks&&t(this.element).on("click.ajaxArchive",this.options.paginationLinks,function(n){var i=t(this).attr("href");i&&(e._navigate({url:i,append:!1},this._preventDefault),n.preventDefault())}),this.options.filterElement&&t(this.element).on("click.ajaxArchive",this.options.filterElement+" a",function(n){var i=t(this).attr("href");i&&(e._navigate({url:i,append:!1},this._preventDefault),n.preventDefault())})},_updateNext:function(t){t=t||"",console.log(t),this.element.find(this.options.nextPageElement).attr("href",t),this.element.find(this.options.loadMoreButton).toggleClass(this.options.noMoreClass,!t)},_preventDefault:function(t){t.preventDefault()},_hashUrl:function(t){var e,n=0;if(0===t.length)return n;for(e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return n},_navigate:function(e,n){var i=this;this.element.addClass(this.options.loadingClass),t.get(e.url,function(a){var o=t(a),r=o.find(i.options.postContainer).contents();if(i.options.filterElement){var s=t(i.options.filterElement,i.element),l=o.find(i.options.filterElement).contents();s.empty().append(l),i._trigger("filterUpdate",null,{items:l,container:s,target:i})}var p=o.find(i.options.nextPageElement).attr("href");i._updateNext(p),i._trigger("updateNext",null,{url:p,target:i});var u=t(i.options.postContainer,i.element);e.append||(i._trigger("empty",null,{items:r,container:u,target:i}),u.empty()),i._trigger("append",null,{items:r,container:u,target:i}),u.append(r),i._trigger("appended",null,{items:r,container:u,target:i}),i.element.removeClass(i.options.loadingClass),t(document.body).trigger("post-load"),"function"==typeof n&&n(a,r,l)})},_destroy:function(){this.element.removeClass("ajax-archive")}})}(jQuery);