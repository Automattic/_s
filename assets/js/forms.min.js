!function(e){window.dataLayer=window.dataLayer||[],e(".svbk-form").on("submit.svbk",function(r){var s=e(this),o=s.serialize(),t=e(".messages ul",s),a=s.siblings(".form-title").text();e(".field-group",s).removeClass("error"),e(".field-group .field-errors",s).text(""),s.removeClass("response-success response-error"),t.empty(),s.addClass("loading"),o+="&ajax=1",e.ajax({dataType:"json",url:s.attr("action"),type:"POST",data:o,success:function(r){if(s.addClass("response-"+r.status),"error"===r.status)for(var o in r.errors)e.isNumeric(o)?t.append('<li class="error">'+r.errors[o]+"</li>"):(e("."+r.prefix+"-"+o+"-group",s).addClass("error"),e("."+r.prefix+"-"+o+"-group .field-errors",s).text(r.errors[o])),dataLayer.push({event:"formEvent",formEvent:"errorField",formTitle:a,errorField:o,errorDescription:r.errors[o]});else t.append('<li class="success">'+r.message+"</li>"),s.trigger("reset"),dataLayer.push({event:"formEvent",formEvent:"success",formTitle:a});s.removeClass("loading"),r.redirect&&(window.location.href=r.redirect)},error:function(e){s.addClass("response-request-error"),t.append('<li class="error">Request Error</li>'),dataLayer.push({event:"formEvent",formEvent:"requestError",formTitle:a}),s.removeClass("loading")}}),r.preventDefault(),dataLayer.push({event:"formEvent",formEvent:"submit",formTitle:a})}),e(".policy-flags-open").on("click",function(r){dataLayer.push({event:"formEvent",formEvent:"policyOpen"}),r.preventDefault(),e(e(this).attr("href")).slideToggle()}),e(".policy-flags-all input").on("change",function(r){var s=e(this).closest(".policy-agreements").find(".policy-flags input");e(this).is(":checked")?s.prop("checked",!0):s.prop("checked",!1)}),e(".svbk-form .messages").on("click",".close",function(){e(this).closest(".svbk-form").removeClass("response-success response-error")})}(jQuery);